@using MyMuseo.Models;
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="At myMuseo.com we’re expanding the ecosystem for artists and collectors. Join our community to share your art and collections. myMuseo.com exists as an online forum to bring together art enthusiasts: artists and collectors, who are excited to share their work and collections and to discover something new. Buy sell or just take part in the discussion." />
    <meta name="keywords" content="Art for Sale, Original Artwork, Paintings, Photography, Sculpture, Prints, Buy Art Online, Sell Art Online, myMuseo" />
    <title>@ViewBag.Title - myMuseo</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    @Scripts.Render("~/bundles/jquery")
    <link href="~/Content/style.css" rel="stylesheet" type="text/css" media="all" />
    <link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
    <link href="~/Content/BootSideMenu.css" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/popper.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/moment.js")" type="text/javascript"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>
<body>
  <style>

.bootsidemenu {
    z-index: 1;
    position: fixed;
    top: -1px;
    bottom: -1px;
    padding: 0;
    right: 0px;
    background-color: #fff;
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
    border: 1px solid rgba(0, 0, 0, .15);
    -webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, .175);
    box-shadow: 0 6px 12px rgba(0, 0, 0, .175);
}

.bootsidemenu.bootsidemenu-right {
    right: 0;
    left: auto; /*20px;*/
}

.bootsidemenu > .menu-wrapper {
    padding: 0;
    position: absolute;
    bottom: 0;
    top: 0;
    overflow-y: auto;
    overflow-x: hidden;
    width: 100%;
}

.bootsidemenu {
    /*width: auto;*/
    min-width: unset;
}

.toggler {
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
    border: 1px solid rgba(0, 0, 0, .15);
    width: 20px;
    height: 48px;
    position: absolute;
    top: 47%;
    cursor: pointer;
    background-color: #fff;
}

.bootsidemenu-right > .toggler {
    -webkit-border-top-left-radius: 4px;
    -webkit-border-bottom-left-radius: 4px;
    -moz-border-radius-topleft: 4px;
    -moz-border-radius-bottomleft: 4px;
    border-top-left-radius: 4px;
    border-bottom-left-radius: 4px;
    border-right: 1px solid #fff;
    -webkit-box-shadow: -1px 0 8px rgba(0, 0, 0, .175);
    box-shadow: -1px 0 8px rgba(0, 0, 0, .175);
    left: -20px;
}

.bootsidemenu-right > .toggler > span {
    margin: 15px 2px;
}

.cp-scroll {
    max-height:140px;
    overflow-y:auto;  
}


.verticaltextx {
	transform: rotate(90deg);
	-webkit-transform: rotate(90deg);
	-moz-transform: rotate(90deg);
	-ms-transform: rotate(90deg);
	-o-transform: rotate(90deg);
	color: #fff;
	background: #3381e2;
	font-size: 16px;
    vertical-align: top;
    height: 23px;
	width: 100px;
    margin-left: -40px;
    margin-top: 40px;
    text-align: center;
   
}

.glyphicon-pencil:hover {
    color:#d1d311;
}
.glyphicon-pencil:active {
    color:#fdfb4a;
}

.glyphicon-refresh:hover {
    color:#d1d311;
}
.glyphicon-refresh:active {
    color:#fdfb4a;
}
.glyphicon-arrow-left:hover {
    color:#d1d311;
}
.glyphicon-arrow-left:active {
    color:#fdfb4a;
}
.glyphicon-arrow-right:hover {
    color:#d1d311;
}
.glyphicon-arrow-right:active {
    color:#fdfb4a;
}

#q:hover {
    background-color: #f3f3f3;
	border: 1px solid #d3e50a;
    color: #333333;
    outline: none;
}

#q:focus {
    outline: none;
    background-color: #f3f3f3;
	border: 1px solid #d3e50a;
    color: #333333;
    -webkit-box-shadow: 7px 6px 23px 1px rgba(119, 119, 119, 0.37);
	-moz-box-shadow: 7px 6px 23px 1px rgba(119, 119, 119, 0.37);
	box-shadow: 7px 6px 23px 1px rgba(119, 119, 119, 0.37);
}

.unstyled-button {
  border: none;
  padding: 0;
  background: none;
}

    .object-fit_contain { width:340px; height:340px; object-fit: contain; }

  </style>
    <div class="navbar navbar-default navbar-fixed-top" style="background-color: white !important;">
        
        <div class="col-md-12">
            <div>
                <div class="navbar-header">
                    <button button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
            <a href="~/Home" title="myMuseo">
                <img style="padding-left: 40px; margin-top: 10px;" src="~/Content/images/myMuseo.png" class="hidden-xs">
                <img style="padding-left: 0px; margin-top: 10px; width: 90%;" src="~/Content/images/myMuseo.png" class="visible-xs">
            </a>
             
            @Html.Partial("_LoginDropdown")
                 
            </div>
            
            <div id="navbar" class="collapse navbar-collapse navbar-responsive-collapse" >
                <ul class="nav navbar-nav" style="font-size: 16px;letter-spacing: 1px!important;font-family:Avenir-Book">
                    <li>@Html.ActionLink("Painting", "ItemsListing", "Home",new { id = 1, order = 0 }, new { @class="border" })</li>
                    <li>@Html.ActionLink("Drawing", "ItemsListing", "Home", new { id = 2, order = 0 }, new { @class = "border" })</li>
                    <li>@Html.ActionLink("Prints", "ItemsListing", "Home", new { id = 3, order = 0 }, new { @class = "border" })</li>
                    <li>@Html.ActionLink("Photography", "ItemsListing", "Home", new { id = 7, order = 0 }, new { @class = "border" })</li>
                    <li>@Html.ActionLink("Collage", "ItemsListing", "Home", new { id = 4, order = 0 }, new { @class = "border" })</li>
                    <li>@Html.ActionLink("Jewelry", "ItemsListing", "Home", new { id = 11, order = 0 }, new { @class = "border" })</li>
                    <li>@Html.ActionLink("Sculpture", "ItemsListing", "Home", new { id = 16, order = 0 }, new { @class = "border" })</li>
                    <li>@Html.ActionLink("All Categories", "AllCategories", "Home", new { id = 0 }, new { @class = "border" })</li>
                    <li>@Html.ActionLink("All Members", "AllMembers", "Home", new { id = 0 }, new { @class = "border" })</li>
                    <li>
                        <form id="frmsearch" action="~/Home/ItemsSearch" method="get">
                            <table style="margin-top: 8px;width: 200px;">
                                <tr>
                                    <td>
                                        <input class="form-control no-border text18"  id="q" name="q" type="text" placeholder="Search" autocomplete="off">
                                    </td>
                                    <td>
                                        <button id="submit" name="submit" class="unstyled-button"><i class="glyphicon glyphicon-search"></i></button>
                                    </td>
                                </tr>
                            </table>
                       </form>
                    </li>   
                </ul>    
            </div>
        </div>
    </div>

    @Html.Partial("_ErrorMessageModal")

    <script>
       

        var dict = {};
        $(document).ready(function () {
            $('[data-toggle="popover"]').popover();
            var docHeight = $(window).height();
            var footerHeight = $('#footer').height();
            var footerTop = $('#footer').position().top + footerHeight;
            if (footerTop < docHeight) {
                $('#footer').css('margin-top', 0 + (docHeight - footerTop) + 'px');
            }
            toggleSlide();
        });

        $(document.body).on('click', function (e) {
            $('[data-toggle="popover"]').each(function () {
                //the 'is' for buttons that trigger popups
                //the 'has' for icons within a button that triggers a popup
                if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
                    var bsPopover = $(this).data('bs.popover'); // Here's where the magic happens
                    if (bsPopover) bsPopover.hide();
                }
            });
        });

    </script>

    <div style="margin-top: 20px;">
        <!-- Page content -->
        <div id="page-content">
            <div class="spacer40 hidden-sx" ></div>
            <!-- Keep all page content within the page-content inset div! -->
            <div>
                @RenderBody()
            </div>
            <div id="footer">
                @Html.Partial("_Footer")
            </div>  
        </div>
   </div>    
   <div id="side-panel" class="container bootsidemenu bootsidemenu-right" style="top: 200px; width: 464px; background: #3381e2;">
       
                    <div  class="menu-wrapper">
                        
                                    @if (Request.IsAuthenticated)
                                    {
                                        <div class="panel-heading">
                                            <a href="#" onclick="togglePost()" style="color: white; font-size: 16px;">Write a post <span class="glyphicon glyphicon-pencil"></span> </a> <a href="#" onclick="showPhoto()" style="color: white; font-size: 16px; margin-left: 20px;">Add a Photo <span class="glyphicon glyphicon-picture"></span></a> <a href="#" onclick="showEvent()" style="color: white; font-size: 16px; margin-left: 20px;">Add an Event <span class="glyphicon glyphicon-calendar"></span></a>
                                            <a href="#" onclick="toggleSlide()" style="color: white; font-size: 16px;" class="class pull-right"><span class="glyphicon glyphicon-remove"></span></a>
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="panel-heading">
                                            <span style="color: white; font-size: 16px;">Write a post <span class="glyphicon glyphicon-pencil"></span> </span> <span style="color: white; font-size: 16px; margin-left: 20px;">Add a Photo <span class="glyphicon glyphicon-picture"></span></span> <span style="color: white; font-size: 16px; margin-left: 20px;">Add an Event <span class="glyphicon glyphicon-calendar"></span></span>
                                            <a href="#" onclick="toggleSlide()" style="color: white; font-size: 16px;" class="class pull-right"><span class="glyphicon glyphicon-remove"></span></a>
                                        </div>
                                    }

                                    @if (Request.IsAuthenticated)
                                    {

                                        <div class="panel panel-primary">
                                            <div class="panel-body">
                                                <div id="main-area">
                                                    <table width="100%">
                                                        <tr>
                                                            <td width="60" valign="top">
                                                                <img src="@ViewBag.CollectorImage" style="width: 50px; height: 50px;">
                                                            </td>
                                                            <td>
                                                                <div id="post-div-label">
                                                                    <span style="font-size:24px; width: 100%; color: #595959;">What's Up? Let Everyone know!</span>
                                                                </div>
                                                                <div id="post-div-form" style="display:none;">
                                                                    <form class="form" role="form" method="post" action="~/Xtra/StartThread" id="startthread">
                                                                        <div class="form-group">
                                                                            <textarea name="topic" rows="2" style="width: 100%;"></textarea>
                                                                        </div>
                                                                        <div class="form-group pull-right">
                                                                            <a href="#" onclick='togglePost()'>Cancel</a>
                                                                            <button type="submit" class="btn-primary">Post</button>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>

                                                <div id="photo-area" style="display:none;">
                                                    @using (Html.BeginForm("CreatePhoto", "Xtra", FormMethod.Post, new { id = "PhotoForm", enctype = "multipart/form-data" }))
                                                    {
                                                        <div align="center"><span class="text18bold">Photo Information</span></div>
                                                            <table width="100%" cellpadding="10">
                                                                <tr><td class="text16bold">Photo</td><td><input type="file" name="file" class="text16bold"></td></tr>
                                                                <tr><td class="text16bold">Message</td><td><textarea rows="2" style="width: 100%;" name="photo-message"></textarea></td></tr>
                                                            </table>
                                                            <div class="spacer10"></div>
                                                            <div class="pull-right">
                                                                <a href="#" onclick='hidePhoto()'>Cancel</a>
                                                                <button type="button" class="btn-primary" onclick="document.getElementById('PhotoForm').submit();">Upload Photo</button>
                                                            </div>
                                                    }
                                                </div>


                                                <div id="event-area" style="display:none;">
                                                    @using (Html.BeginForm("CreateEvent", "Xtra", FormMethod.Post, new { id = "EventForm", enctype = "multipart/form-data" }))
                                                    {
                                                        <div><span class="text16bold">Event Information (Fill in the details of your Event)</span></div>
                                                            <table width="100%">
                                                                <tr><td class="text16bold">Event Photo <br /> (Optional)</td><td><input type="file" name="file" class="text16bold"></td></tr>
                                                                <tr><td class="text16bold">Event Name:</td><td><input name="event-name" class="textfield1" type="text" /></td></tr>
                                                                <tr><td class="text16bold">Location:</td><td><input name="event-location" class="textfield1" type="text" /></td></tr>
                                                                <tr>
                                                                    <td class="text16bold">Start Date:</td>
                                                                    <td>
                                                                        @Html.DropDownList("StartDay", Enumerable.Range(1, 31).Select(i => new SelectListItem { Value = i.ToString(), Text = i.ToString() }), "Day", new { @class = "textfield1", @style = "width: 100px;" })
                                                                        @Html.DropDownList("StartMonth", Enumerable.Range(1, 12).Select(i => new SelectListItem { Value = i.ToString(), Text = System.Globalization.CultureInfo.InvariantCulture.DateTimeFormat.GetMonthName(i) }), "Month", new { @class = "textfield1", @style = "width: 140px;" })
                                                                        @Html.DropDownList("StartYear", Enumerable.Range(2018, 2).Select(i => new SelectListItem { Value = i.ToString(), Text = i.ToString() }), "Year", new { @class = "textfield1", @style = "width: 100px;" })
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td class="text16bold">Start Time:</td>
                                                                    <td>
                                                                        @Html.DropDownList("StartHour", Enumerable.Range(0, 12).Select(i => new SelectListItem { Value = i.ToString(), Text = i.ToString() }), "HH", new { @class = "textfield1", @style = "width: 100px;" })<span> : </span>
                                                                        @Html.DropDownList("StartMinute", Enumerable.Range(0, 12).Select(i => new SelectListItem { Value = (i * 5).ToString(), Text = (i * 5).ToString() }), "MM", new { @class = "textfield1", @style = "width: 100px;" }) <span> </span>
                                                                        @Html.DropDownList("StartAMPM", Enumerable.Range(0, 2).Select(i => new SelectListItem { Value = (i > 0 ? "PM" : "AM"), Text = (i > 0 ? "PM" : "AM") }), "AM/PM", new { @class = "textfield1", @style = "width: 120px;" })

                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td class="text16bold">End Date:</td>
                                                                    <td>
                                                                        @Html.DropDownList("EndDay", Enumerable.Range(1, 31).Select(i => new SelectListItem { Value = i.ToString(), Text = i.ToString() }), "Day", new { @class = "textfield1", @style = "width: 100px;" })
                                                                        @Html.DropDownList("EndMonth", Enumerable.Range(1, 12).Select(i => new SelectListItem { Value = i.ToString(), Text = System.Globalization.CultureInfo.InvariantCulture.DateTimeFormat.GetMonthName(i) }), "Month", new { @class = "textfield1", @style = "width: 140px;" })
                                                                        @Html.DropDownList("EndYear", Enumerable.Range(2018, 2).Select(i => new SelectListItem { Value = i.ToString(), Text = i.ToString() }), "Year", new { @class = "textfield1", @style = "width: 100px;" })
                                                                    </td>
                                                                </tr>

                                                                <tr>
                                                                    <td class="text16bold">End Time:</td>
                                                                    <td>
                                                                        @Html.DropDownList("EndHour", Enumerable.Range(0, 12).Select(i => new SelectListItem { Value = i.ToString(), Text = i.ToString() }), "HH", new { @class = "textfield1", @style = "width: 100px;" })<span> : </span>
                                                                        @Html.DropDownList("EndMinute", Enumerable.Range(0, 12).Select(i => new SelectListItem { Value = (i * 5).ToString(), Text = (i * 5).ToString() }), "MM", new { @class = "textfield1", @style = "width: 100px;" }) <span> </span>
                                                                        @Html.DropDownList("EndAMPM", Enumerable.Range(0, 2).Select(i => new SelectListItem { Value = (i > 0 ? "PM" : "AM"), Text = (i > 0 ? "PM" : "AM") }), "AM/PM", new { @class = "textfield1", @style = "width: 120px;" })
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                                        <div class="spacer20"></div>
                                                                        <div class="pull-right">
                                                                            <a href="#" onclick='hideEvent()'>Cancel</a>
                                                                            <button type="button" class="btn-primary" onclick="document.getElementById('EventForm').submit();">Create Event</button>
                                                                        </div>
                                                    }
                                                </div>


                                            </div>
                                            <div class="panel-footer" style="color: #3381e2; font-size: 16px;">
                                                Photo <span class="glyphicon glyphicon-picture"></span> Event <span class="glyphicon glyphicon-calendar"></span>
                                            </div>
                                        </div>
                                    }

                                    @foreach (Thread thread in ViewBag.Threads)
                                    {
                                        var threadTag = "T" + thread.ThreadId;
                                        var threadLabel = "L" + thread.ThreadId;
                                        var commentTag = "C" + thread.ThreadId;
                                        var commentLabel = "LC" + thread.ThreadId;
                                        var likeLabel = "Like" + thread.ThreadId;
                                        var interestedLabel = "Interested" + thread.ThreadId;
                                        var goingLabel = "Going" + thread.ThreadId;

                                        <div class="panel panel-primary">
                                            <div class="panel-body" style="">
                                                <table width="100%">
                                                    <tr>
                                                        <td width="60" valign="top">
                                                            <img src="@ViewBag.GetUserImage(@thread.PostByCollectorId)" style="width: 50px; height: 50px;">
                                                        </td>
                                                        <td>
                                                            <table width="100%">
                                                                <tr>
                                                                    <td>
                                                                        @if (Request.IsAuthenticated)
                                                                        {
                                                                            <a class="pull-right" href="#" data-toggle="popover" data-placement="bottom" data-html="true" data-content="<div><a href='#' onclick='showEdit(@thread.ThreadId)'>Edit</a><br/><a href='#'>Delete</a></div>"><i style="font-size:32px;" class="glyphicon glyphicon-option-horizontal"></i></a>

                                                                            if (thread.ThreadTypeId == 2)
                                                                            {
                                                                                <div class="pull-right">
                                                                                    <div class="dropdown">
                                                                                        <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">
                                                                                            <span class="glyphicon glyphicon-star"></span> Interested
                                                                                            <span class="caret"></span>
                                                                                        </button>
                                                                                        <ul class="dropdown-menu">
                                                                                            <li><a href="#" onclick="postGoing('@goingLabel', '@thread.ThreadId')">Going</a></li>
                                                                                            <li><a href="#" onclick="postInterested('@interestedLabel', '@thread.ThreadId')">Interested</a></li>
                                                                                        </ul>
                                                                                    </div>
                                                                                </div>
                                                                            }
                                                                        }

                                                                        <div style="font-size:16px;"><a href="#">@ViewBag.GetUserName(@thread.PostByCollectorId)</a></div>

                                                                        <div><span style="font-size:12px;">@thread.CreatedDate.ToString("MMM d, yyyy")</span></div>
                                                                    </td>
                                                                    <td></td>
                                                                </tr>
                                                            </table>
                                                            <div id="@threadLabel" style="font-size:14px;">
                                                                @if (thread.ThreadTypeId != 2)
                                                                {
                                                                    <span>@thread.ThreadTopic</span>
                                                                    <div class="spacer10"></div>
                                                                }
                                                            </div>
                                                            <div id="@threadTag" style="display:none;">
                                                                <form class="form" role="form" method="post" action="~/Xtra/UpdateThread" accept-charset="UTF-8" id="updatethread@threadTag">
                                                                    <input id="reply-text@threadTag" name="reply-text@threadTag" type="text" style="font-size:16px; width: 100%;" value="@thread.ThreadTopic" />
                                                                    <input type="hidden" name="threadTag" id="threadTag" value="@thread.ThreadId" />
                                                                </form>
                                                            </div>
                                                            @if (thread.ThreadTypeId == 2)
                                                            {
                                                                <div>
                                                                    <table cellpadding="10">
                                                                        <tr>
                                                                            <td valign="top" width="80" align="center">
                                                                                <span style="font-size: 16px; color: red; font-weight: bold;">@thread.ThreadStartDate.ToString("MMM").ToUpper()</span><br />
                                                                                <span style="font-size: 16px; font-weight: bold;">@thread.ThreadStartDate.Day</span>
                                                                            </td>

                                                                            <td>
                                                                                <div>
                                                                                    <span>@thread.ThreadTopic</span><br />
                                                                                    <span>@thread.ThreadText</span><br />
                                                                                    <span>@thread.ThreadStartDate</span><br />
                                                                                    <span>@thread.ThreadEndDate</span>
                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                    </table>

                                                                </div>
                                                                    <div class="spacer10"></div>
                                                            }
                                                            @if (!String.IsNullOrEmpty(thread.ThreadImage))
                                                            {
                                                                <img src="@thread.ThreadImage" class="object-fit_contain" />
                                                            }
                                                            @foreach (Post post in thread.Posts)
                                                            {
                                                                <div>
                                                                    <div>
                                                                        <a href="#">-- @ViewBag.GetUserName(@post.PostByCollectorId): </a>
                                                                        <span>@post.PostTopic</span>
                                                                    </div>
                                                                    <div><span style="font-size:12px;">@post.CreatedDate.ToString("MMM d, yyyy")</span></div>

                                                                    @foreach (Reply reply in post.Replies)
                                                                    {
                                                                        <div style="margin-left:20px;">
                                                                            <span class="glyphicon glyphicon-share-alt"> </span><a href="#">@ViewBag.GetUserName(@reply.ReplyByCollectorId):</a>
                                                                            <span>@reply.ReplyTopic</span>
                                                                        </div>
                                                                            <div style="margin-left:20px;"><span style="font-size:12px;">@reply.CreatedDate.ToString("MMM d, yyyy")</span></div>
                                                                    }
                                                                    @if (Request.IsAuthenticated)
                                                                    {
                                                                        <div>
                                                                            <a href="#" onclick='showReply("@post.PostId")'>Reply</a>
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div>
                                                                            <span>  </span>
                                                                        </div>
                                                                    }

                                                                    <div id="@post.PostId" style="display:none;">
                                                                        <form class="form" role="form" method="post" action="~/Xtra/ReplyPost" accept-charset="UTF-8" id="replypost@post.PostId">
                                                                            <textarea rows="2" id="reply-text@post.PostId" name="reply-text@post.PostId" style="font-size:16px; width: 100%;"></textarea>
                                                                            <input type="hidden" name="P@post.PostId" id="P@post.PostId" value="@post.PostId" />
                                                                            <div class="form-group pull-right">
                                                                                <a href="#" onclick='showReply("@post.PostId")'>Cancel</a>
                                                                                <button type="submit" class="btn-primary">Reply</button>
                                                                            </div>
                                                                        </form>
                                                                    </div>
                                                                    <div class="spacer20"></div>
                                                                </div>
                                                            }
                                                        </td>
                                                    </tr>
                                                </table>

                                            </div>
                                            <div class="panel-footer" style="color: #3381e2; font-size: 16px;">
                                                @if (Request.IsAuthenticated)
                                                {
                                                    <div id="@commentLabel">
                                                        <button class="unstyled-button" onclick='showComment("@commentTag")' style="width: 100%; color: #444444; background-color: #cccccc; padding: 8px;">Write a Comment</button>
                                                    </div>
                                                }
                                                <div id="@commentTag" style="display:none;">
                                                    <form class="form" role="form" method="post" action="~/Xtra/ReplyThread" accept-charset="UTF-8" id="replythread">
                                                        <div class="form-group">
                                                            <textarea id="reply-thread" name="reply-thread" rows="2" style="width: 100%;"></textarea>
                                                        </div>
                                                        <input type="hidden" name="T@thread.ThreadId" id="T@thread.ThreadId" value="@thread.ThreadId" />
                                                        <div class="form-group pull-right">
                                                            <a href="#" onclick='showComment("@commentTag")'>Cancel</a>
                                                            <button type="submit" class="btn-primary">Post</button>
                                                        </div>
                                                    </form>
                                                </div>
                                                <div class="spacer10"></div>
                                                <div>
                                                    @if (thread.ThreadTypeId == 2)
                                                    {
                                                        <span id="@goingLabel">@thread.GoingCount</span> <span>Going </span>
                                                        <span id="@interestedLabel">@thread.InterestedCount</span> <span>Interested </span>
                                                    }
                                                    <span id="@likeLabel">@thread.LikesCount</span> Likes
                                                    @if (Request.IsAuthenticated)
                                                    {
                                                        <a style="margin-left:10px;" href="#" onclick="postLike('@likeLabel', '@thread.ThreadId')">Like <span class="glyphicon glyphicon-heart"></span></a>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    }
                                
                    </div>
       <div id="menu-toggle" class="toggler" onclick="toggleSlide()"><span class="icon glyphicon glyphicon-chevron-left">&nbsp;</span></div>   
    </div>
          
    
    <script>
        function postLike(id, threadid)
        {
            var count = $('#'+id).text();
            var url = "/Xtra/LikeMsg";
            $.get(url, { input: count, thread: threadid }, function (data) {
                $("#"+id).html(data);
            });
        }

        function postInterested(id, threadid) {
            var count = $('#' + id).text();
            var url = "/Xtra/InterestedMsg";
            $.get(url, { input: count, thread: threadid }, function (data) {
                $("#" + id).html(data);
            });
        }

        function postGoing(id, threadid) {
            var count = $('#' + id).text();
            var url = "/Xtra/GoingMsg";
            $.get(url, { input: count, thread: threadid }, function (data) {
                $("#" + id).html(data);
            });
        }

        function showReply (id)
        {
            $('#' + id).toggle();
        }

        function showComment(id) {
            $('#' + id).toggle();
            $('#L' + id).toggle();
        }

        function showEdit(id) {
            $('#L' + id).toggle();
            $('#T' + id).toggle();
        }

        function togglePost() {
            $('#post-div-label').toggle();
            $('#post-div-form').toggle();
        }

        function showEvent() {
            $('#main-area').hide();
            $('#event-area').show();
        }

        function hideEvent() {
            $('#main-area').show();
            $('#event-area').hide();
        }

        function showPhoto() {
            $('#main-area').hide();
            $('#photo-area').show();
        }

        function hidePhoto() {
            $('#main-area').show();
            $('#photo-area').hide();
        }

        function toggleSlide() {
            //alert('?');
            var cp = document.getElementById("side-panel");
            //alert(cp.style.width);
            if (cp.style.right == "0px") {
                cp.style.right = "-464px";
                $("#menu-toggle").show();
            } else {
                cp.style.right = "0px";
                $("#menu-toggle").hide();
            }
        }

        function toggleCP() {
            var cp = document.getElementById("cp");
            cp.style.height = window.innerHeight - 160 + "px";
            var cp2 = document.getElementById("cp2");
            cp2.style.height = window.innerHeight - 160 + "px";
            if (cp.style.right == "0px") {
                cp.style.right = "-460px";
                $("#vtext").show();
                $("#menu-toggle").show();
            } else {
                cp.style.right = "0px";
                $("#vtext").hide();
                $("#menu-toggle").hide();
            }
            //var iSelector = $("#menu1");
            //if (iSelector.hasClass('glyphicon-arrow-right')) {
            //    iSelector.removeClass('glyphicon-arrow-right')
            //    iSelector.addClass('glyphicon-arrow-left')
            //} else if (iSelector.hasClass('glyphicon-arrow-left')) {
            //    iSelector.removeClass('glyphicon-arrow-left')
            //    iSelector.addClass('glyphicon-arrow-right')
            //}
        }

    </script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-114864897-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-114864897-1');
    </script>
            @Scripts.Render("~/bundles/bootstrap")
            @RenderSection("scripts", required: false)
</body>
</html>
